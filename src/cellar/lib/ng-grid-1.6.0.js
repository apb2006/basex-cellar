/***********************************************
* ng-grid JavaScript Library
* Authors: https://github.com/angular-ui/ng-grid/blob/master/README.md
* License: MIT (http://www.opensource.org/licenses/mit-license.php)
* Compiled At: 01/02/2013 17:28:59
***********************************************/
(function(g){if(!g.ng){g.ng={};}g.ngGrid={};g.ngGrid.i18n={};var m=angular.module("ngGrid.services",[]);var j=angular.module("ngGrid.directives",[]);var d=angular.module("ngGrid.filters",[]);var b="__ng_selected__";var l=8;var a=6;var c="asc";var e="desc";var o="_ng_field_";var h="_ng_depth_";var n="_ng_hidden_";var i="_ng_column_";var k=/CUSTOM_FILTERS/g;var f=/<.+>/;ng.moveSelectionHandler=function(s,u,q){if(u===null||u===undefined){return true;}if(u.config.selectedItems===undefined){return true;}var p=q.which||q.keyCode;var v=(p==38?-1:(p==40?1:null));if(!v){return true;}var r=s.renderedRows;var t=r.indexOf(u.selectionService.lastClickedRow)+v;if(t<0||t>=r.length){return true;}u.selectionService.ChangeSelection(r[t],q);if(t>r.length-l){u.$viewport.scrollTop(u.$viewport.scrollTop()+(u.config.rowHeight*2));}else{if(t<l){u.$viewport.scrollTop(u.$viewport.scrollTop()-(u.config.rowHeight*2));}}if(!s.$$phase){s.$parent.$digest();}return false;};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(q){var p=this.length>>>0;var r=Number(arguments[1])||0;r=(r<0)?Math.ceil(r):Math.floor(r);if(r<0){r+=p;}for(;r<p;r++){if(r in this&&this[r]===q){return r;}}return -1;};}if(!Array.prototype.filter){Array.prototype.filter=function(q){var v=Object(this);var p=v.length>>>0;if(typeof q!=="function"){throw new TypeError();}var u=[];var s=arguments[1];for(var r=0;r<p;r++){if(r in v){var w=v[r];if(q.call(s,w,r,v)){u.push(w);}}}return u;};}ng.utils={visualLength:function(q){var p=document.getElementById("testDataLength");if(!p){p=document.createElement("SPAN");p.id="testDataLength";p.style.visibility="hidden";document.body.appendChild(p);}$(p).css("font",$(q).css("font"));p.innerHTML=$(q).text();return p.offsetWidth;},forIn:function(q,p){for(var r in q){if(q.hasOwnProperty(r)){p(q[r],r);}}},evalProperty:function(s,u){var q=u.split("."),t=0;var p=s[q[t]],r=q.length;t++;while(p&&t<r){p=p[q[t]];t++;}return p;},endsWith:function(q,p){if(!q||!p||typeof q!="string"){return false;}return q.indexOf(p,q.length-p.length)!==-1;},isNullOrUndefined:function(p){if(p===undefined||p===null){return true;}return false;},getElementsByClassName:function(q){var p=[];var u=new RegExp("\\b"+q+"\\b");var t=document.getElementsByTagName("*");for(var s=0;s<t.length;s++){var r=t[s].className;if(u.test(r)){p.push(t[s]);}}return p;},newId:(function(){var p=new Date().getTime();return function(){return p+=1;};})(),seti18n:function(p,s){var r=g.ngGrid.i18n[s];for(var q in r){p.i18n[q]=r[q];}},ieVersion:(function(){var p=3,r=document.createElement("div"),q=r.getElementsByTagName("i");while(r.innerHTML="<!--[if gt IE "+(++p)+"]><i></i><![endif]-->",q[0]){}return p>4?p:undefined;})()};$.extend(ng.utils,{isIe6:(function(){return ng.utils.ieVersion===6;})(),isIe7:(function(){return ng.utils.ieVersion===7;})(),isIe:(function(){return ng.utils.ieVersion!==undefined;})()});d.filter("ngColumns",function(){return function(p){return p.filter(function(q){return !q.isAggCol;});};});d.filter("checkmark",function(){return function(p){return p?"\u2714":"\u2718";};});m.factory("SortService",function(){var p={};p.colSortFnCache={};p.dateRE=/^(\d\d?)[\/\.-](\d\d?)[\/\.-]((\d\d)?\d\d)$/;p.guessSortFn=function(s){var t,v,r,u,q;if(s===undefined||s===null||s===""){return null;}v=typeof(s);switch(v){case"number":t=p.sortNumber;break;case"boolean":t=p.sortBool;break;default:t=undefined;break;}if(t){return t;}if(Object.prototype.toString.call(s)==="[object Date]"){return p.sortDate;}if(v!=="string"){return p.basicSort;}if(s.match(/^-?[£$¤]?[\d,.]+%?$/)){return p.sortNumberStr;}r=s.match(p.dateRE);if(r){u=parseInt(r[1],10);q=parseInt(r[2],10);if(u>12){return p.sortDDMMStr;}else{if(q>12){return p.sortMMDDStr;}else{return p.sortMMDDStr;}}}return p.sortAlpha;};p.basicSort=function(r,q){if(r==q){return 0;}if(r<q){return -1;}return 1;};p.sortNumber=function(r,q){return r-q;};p.sortNumberStr=function(s,q){var v,u,t=false,r=false;v=parseFloat(s.replace(/[^0-9.-]/g,""));if(isNaN(v)){t=true;}u=parseFloat(q.replace(/[^0-9.-]/g,""));if(isNaN(u)){r=true;}if(t&&r){return 0;}if(t){return 1;}if(r){return -1;}return v-u;};p.sortAlpha=function(s,q){var t=s.toLowerCase(),r=q.toLowerCase();return t==r?0:(t<r?-1:1);};p.sortDate=function(r,q){var t=r.getTime(),s=q.getTime();return t==s?0:(t<s?-1:1);};p.sortBool=function(r,q){if(r&&q){return 0;}if(!r&&!q){return 0;}else{return r?1:-1;}};p.sortDDMMStr=function(s,r){var u,t,v,q,w,x;v=s.match(p.dateRE);x=v[3];q=v[2];w=v[1];if(q.length==1){q="0"+q;}if(w.length==1){w="0"+w;}u=x+q+w;v=r.match(p.dateRE);x=v[3];q=v[2];w=v[1];if(q.length==1){q="0"+q;}if(w.length==1){w="0"+w;}t=x+q+w;if(u==t){return 0;}if(u<t){return -1;}return 1;};p.sortMMDDStr=function(s,r){var u,t,v,q,w,x;v=s.match(p.dateRE);x=v[3];w=v[2];q=v[1];if(q.length==1){q="0"+q;}if(w.length==1){w="0"+w;}u=x+q+w;v=r.match(p.dateRE);x=v[3];w=v[2];q=v[1];if(q.length==1){q="0"+q;}if(w.length==1){w="0"+w;}t=x+q+w;if(u==t){return 0;}if(u<t){return -1;}return 1;};p.sortData=function(u,q){if(!u||!q){return;}var r=q.column,v=q.direction,t,s;if(p.colSortFnCache[r.field]){t=p.colSortFnCache[r.field];}else{if(r.sortingAlgorithm!=undefined){t=r.sortingAlgorithm;p.colSortFnCache[r.field]=r.sortingAlgorithm;}else{s=u[0];if(!s){return;}t=p.guessSortFn(s[r.field]);if(t){p.colSortFnCache[r.field]=t;}else{t=p.sortAlpha;}}}u.sort(function(y,x){var w=ng.utils.evalProperty(y,r.field);var z=ng.utils.evalProperty(x,r.field);if(!z&&!w){return 0;}else{if(!w){return 1;}else{if(!z){return -1;}}}if(v===c){return t(w,z);}else{return 0-t(w,z);}});return;};p.Sort=function(q,r){if(p.isSorting){return;}p.isSorting=true;p.sortData(r,q);p.isSorting=false;};return p;});m.factory("DomUtilityService",function(){var p={};var q=function(){var r=$("<div></div>");r.appendTo("body");r.height(100).width(100).css("position","absolute").css("overflow","scroll");r.append('<div style="height: 400px; width: 400px;"></div>');p.ScrollH=(r.height()-r[0].clientHeight);p.ScrollW=(r.width()-r[0].clientWidth);r.empty();r.attr("style","");r.append('<span style="font-family: Verdana, Helvetica, Sans-Serif; font-size: 14px;"><strong>M</strong></span>');p.LetterW=r.children().first().width();r.remove();};p.eventStorage={};p.AssignGridContainers=function(s,r){r.$root=$(s);r.$topPanel=r.$root.find(".ngTopPanel");r.$groupPanel=r.$root.find(".ngGroupPanel");r.$headerContainer=r.$topPanel.find(".ngHeaderContainer");r.$headerScroller=r.$topPanel.find(".ngHeaderScroller");r.$headers=r.$headerScroller.children();r.$viewport=r.$root.find(".ngViewport");r.$canvas=r.$viewport.find(".ngCanvas");r.$footerPanel=r.$root.find(".ngFooterPanel");p.UpdateGridLayout(r);};p.UpdateGridLayout=function(r){var s=r.$viewport.scrollTop();r.elementDims.rootMaxW=r.$root.width();r.elementDims.rootMaxH=r.$root.height();r.refreshDomSizes();r.adjustScrollTop(s,true);};p.numberOfGrids=0;p.BuildStyles=function(A,s,y){var r=s.config.rowHeight,t=s.$styleSheet,v=s.gridId,x,z=A.visibleColumns(),u=0;if(!t){t=$("#"+v);if(!t[0]){t=$("<style id='"+v+"' type='text/css' rel='stylesheet' />").appendTo(s.$root);}}t.empty();var w=A.totalRowWidth();x="."+v+" .ngCanvas { width: "+w+"px; }."+v+" .ngRow { width: "+w+"px; }."+v+" .ngCanvas { width: "+w+"px; }."+v+" .ngHeaderScroller { width: "+(w+p.scrollH+2)+"px}";angular.forEach(z,function(B,C){x+="."+v+" .col"+C+" { width: "+B.width+"px; left: "+u+"px; right: "+(w-u-B.width)+"px; height: "+r+"px }."+v+" .colt"+C+" { width: "+B.width+"px; }";u+=B.width;});if(ng.utils.isIe){t[0].styleSheet.cssText=x;}else{t[0].appendChild(document.createTextNode(x));}s.$styleSheet=t;if(y){p.digest(A);}};p.digest=function(r){if(!r.$$phase){r.$digest();}};p.ScrollH=17;p.ScrollW=17;p.LetterW=10;q();return p;});ng.defaultGridTemplate=function(){return'<div class="ngTopPanel" ng-class="{\'ui-widget-header\':jqueryUITheme, \'ui-corner-top\': jqueryUITheme}" ng-style="topPanelStyle()"><div class="ngGroupPanel" ng-show="showGroupPanel()" ng-style="headerStyle()"><div class="ngGroupPanelDescription" ng-show="configGroups.length == 0">{{i18n.ngGroupPanelDescription}}</div><ul ng-show="configGroups.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}}<span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span><span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div><div class="ngHeaderContainer" ng-style="headerStyle()"><div class="ngHeaderScroller" ng-style="headerScrollerStyle()" ng-header-row></div></div><div class="ngHeaderButton" ng-show="showColumnMenu || showFilter" ng-click="toggleShowMenu()"><div class="ngHeaderButtonArrow" ng-click=""></div></div><div ng-show="showMenu" class="ngColMenu"><div ng-show="showFilter"><input placeholder="{{i18n.ngSearchPlaceHolder}}" type="text" ng-model="filterText"/></div><div ng-show="showColumnMenu"><span class="ngMenuText">{{i18n.ngMenuText}}</span><ul class="ngColList"><li class="ngColListItem" ng-repeat="col in columns | ngColumns"><label><input type="checkbox" class="ngColListCheckbox" ng-model="col.visible"/>{{col.displayName}}</label><a title="Group By" ng-class="col.groupedByClass()" ng-show="col.groupable" ng-click="groupBy(col)"></a><span class="ngGroupingNumber" ng-show="col.groupIndex > 0">{{col.groupIndex}}</span></li></ul></div></div></div><div class="ngViewport" ng-class="{\'ui-widget-content\': jqueryUITheme}" ng-style="viewportStyle()"><div class="ngCanvas" ng-style="canvasStyle()"><div ng-style="rowStyle(row)" ng-repeat="row in renderedRows" ng-click="row.toggleSelected($event)" class="ngRow" ng-class="row.alternatingRowClass()" ng-row></div></div></div><div class="ngFooterPanel" ng-class="{\'ui-widget-content\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}" ng-style="footerStyle()"><div class="ngTotalSelectContainer" ng-show="footerVisible"><div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" ><span class="ngLabel">{{i18n.ngTotalItemsLabel}} {{maxRows()}}</span><span ng-show="filterText.length > 0" class="ngLabel">({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span></div><div class="ngFooterSelectedItems" ng-show="multiSelect"><span class="ngLabel">{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}</span></div></div><div class="ngPagerContainer" style="float: right; margin-top: 10px;" ng-show="footerVisible && enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}"><div style="float:left; margin-right: 10px;" class="ngRowCountPicker"><span style="float: left; margin-top: 3px;" class="ngLabel">{{i18n.ngPageSizeLabel}}</span><select style="float: left;height: 27px; width: 100px" ng-model="pagingOptions.pageSize" ><option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option></select></div><div style="float:left; margin-right: 10px; line-height:25px;" class="ngPagerControl" style="float: left; min-width: 135px;"><button class="ngPagerButton" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><div class="ngPagerFirstTriangle"><div class="ngPagerFirstBar"></div></div></button><button class="ngPagerButton" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><div class="ngPagerFirstTriangle ngPagerPrevTriangle"></div></button><input class="ngPagerCurrent" type="text" style="width:50px; height: 24px; margin-top: 1px; padding: 0px 4px;" ng-model="pagingOptions.currentPage"/><button class="ngPagerButton" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><div class="ngPagerLastTriangle ngPagerNextTriangle"></div></button><button class="ngPagerButton" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><div class="ngPagerLastTriangle"><div class="ngPagerLastBar"></div></div></button></div></div></div>';};ng.defaultRowTemplate=function(){return'<div ng-style="{\'cursor\': row.cursor}" ng-repeat="col in visibleColumns()" class="ngCell col{{$index}} {{col.cellClass}}" ng-cell></div>';};ng.defaultCellTemplate=function(){return'<div class="ngCellText colt{{$index}}">{{row.getProperty(col.field) CUSTOM_FILTERS}}</div>';};ng.aggregateTemplate=function(){return'<div ng-click="row.toggleExpand()" ng-style="{\'left\': row.offsetleft}" class="ngAggregate"><span class="ngAggregateText">{{row.label CUSTOM_FILTERS}} ({{row.totalChildren()}} {{AggItemsLabel}})</span><div class="{{row.aggClass()}}"></div></div>';};ng.defaultHeaderRowTemplate=function(){return'<div ng-repeat="col in visibleColumns()" class="ngHeaderCell col{{$index}}" ng-header-cell></div>';};ng.defaultHeaderCellTemplate=function(){return'<div ng-click="col.sort()" class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }"><div class="ngHeaderText colt{{$index}}">{{col.displayName}}</div><div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div><div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div></div><div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"></div>';};ng.Aggregate=function(r,q){var p=this;p.index=0;p.offsetTop=0;p.entity=r;p.label=r.gLabel;p.field=r.gField;p.depth=r.gDepth;p.parent=r.parent;p.children=r.children;p.aggChildren=r.aggChildren;p.aggIndex=r.aggIndex;p.collapsed=true;p.isAggRow=true;p.offsetleft=r.gDepth*25;p.aggLabelFilter=r.aggLabelFilter;p.toggleExpand=function(){p.collapsed=p.collapsed?false:true;p.notifyChildren();};p.setExpand=function(s){p.collapsed=s;p.notifyChildren();};p.notifyChildren=function(){angular.forEach(p.aggChildren,function(t){t.entity[n]=p.collapsed;if(p.collapsed){t.setExpand(p.collapsed);}});angular.forEach(p.children,function(t){t[n]=p.collapsed;});q.rowCache=[];var s=false;angular.forEach(q.aggCache,function(t,u){if(s){var v=(30*p.children.length);t.offsetTop=p.collapsed?t.offsetTop-v:t.offsetTop+v;}else{if(u==p.aggIndex){s=true;}}});q.renderedChange();};p.aggClass=function(){return p.collapsed?"ngAggArrowCollapsed":"ngAggArrowExpanded";};p.totalChildren=function(){if(p.aggChildren.length>0){var s=0;var t=function(u){if(u.aggChildren.length>0){angular.forEach(u.aggChildren,function(v){t(v);});}else{s+=u.children.length;}};t(p);return s;}else{return p.children.length;}};};ng.EventProvider=function(s,r,q){var p=this;p.colToMove=undefined;p.groupToMove=undefined;p.assignEvents=function(){if(s.config.jqueryUIDraggable){s.$groupPanel.droppable({addClasses:false,drop:function(t){p.onGroupDrop(t);}});r.$evalAsync(p.setDraggables);}else{s.$groupPanel.on("mousedown",p.onGroupMouseDown).on("dragover",p.dragOver).on("drop",p.onGroupDrop);s.$headerScroller.on("mousedown",p.onHeaderMouseDown).on("dragover",p.dragOver);if(s.config.enableColumnReordering){s.$headerScroller.on("drop",p.onHeaderDrop);}if(s.config.enableRowReordering){s.$viewport.on("mousedown",p.onRowMouseDown).on("dragover",p.dragOver).on("drop",p.onRowDrop);}}r.$watch("columns",p.setDraggables,true);};p.dragOver=function(t){t.preventDefault();};p.setDraggables=function(){if(!s.config.jqueryUIDraggable){s.$root.find(".ngHeaderSortColumn").attr("draggable","true");}else{s.$root.find(".ngHeaderSortColumn").draggable({helper:"clone",appendTo:"body",stack:"div",addClasses:false,start:function(t){p.onHeaderMouseDown(t);}}).droppable({drop:function(t){p.onHeaderDrop(t);}});}};p.onGroupMouseDown=function(v){var t=$(v.target);if(t[0].className!="ngRemoveGroup"){var u=angular.element(t).scope();if(u){if(!s.config.jqueryUIDraggable){t.attr("draggable","true");}p.groupToMove={header:t,groupName:u.group,index:u.$index};}}else{p.groupToMove=undefined;}};p.onGroupDrop=function(t){t.stopPropagation();var u;var v;if(p.groupToMove){u=$(t.target).closest(".ngGroupElement");if(u.context.className=="ngGroupPanel"){r.configGroups.splice(p.groupToMove.index,1);r.configGroups.push(p.groupToMove.groupName);}else{v=angular.element(u).scope();if(v){if(p.groupToMove.index!=v.$index){r.configGroups.splice(p.groupToMove.index,1);r.configGroups.splice(v.$index,0,p.groupToMove.groupName);}}}p.groupToMove=undefined;s.fixGroupIndexes();}else{if(p.colToMove){if(r.configGroups.indexOf(p.colToMove.col)==-1){u=$(t.target).closest(".ngGroupElement");if(u.context.className=="ngGroupPanel"||u.context.className=="ngGroupPanelDescription ng-binding"){r.groupBy(p.colToMove.col);}else{v=angular.element(u).scope();if(v){r.removeGroup(v.$index);}}}p.colToMove=undefined;}}if(!r.$$phase){r.$apply();}};p.onHeaderMouseDown=function(v){var u=$(v.target).closest(".ngHeaderSortColumn");var t=angular.element(u).scope();if(t){p.colToMove={header:u,col:t.col};}};p.onHeaderDrop=function(v){if(!p.colToMove){return;}var u=$(v.target).closest(".ngHeaderSortColumn");var t=angular.element(u).scope();if(t){if(p.colToMove.col==t.col){return;}r.columns.splice(p.colToMove.col.index,1);r.columns.splice(t.col.index,0,p.colToMove.col);s.fixColumnIndexes();q.BuildStyles(r,s,true);p.colToMove=undefined;}};p.onRowMouseDown=function(v){var u=$(v.target).closest(".ngRow");var t=angular.element(u).scope();if(t){u.attr("draggable","true");q.eventStorage.rowToMove={targetRow:u,scope:t};}};p.onRowDrop=function(x){var w=$(x.target).closest(".ngRow");var t=angular.element(w).scope();if(t){var y=q.eventStorage.rowToMove;if(y.scope.row==t.row){return;}var v=s.sortedData.indexOf(y.scope.row.entity);var u=s.sortedData.indexOf(t.row.entity);s.sortedData.splice(v,1);s.sortedData.splice(u,0,y.scope.row.entity);s.searchProvider.evalFilter();q.eventStorage.rowToMove=undefined;}};p.assignGridEventHandlers=function(){s.$viewport.on("scroll",function(v){var w=v.target.scrollLeft,u=v.target.scrollTop;s.adjustScrollLeft(w);s.adjustScrollTop(u);});var t=false;s.$viewport.on("keydown",function(v){if(!t){t=true;var u=ng.moveSelectionHandler(r,s,v);t=false;return u;}return false;});if(s.config.tabIndex===-1){s.$viewport.attr("tabIndex",q.numberOfGrids);q.numberOfGrids++;}else{s.$viewport.attr("tabIndex",s.config.tabIndex);}$(g).resize(function(){q.UpdateGridLayout(s);if(s.config.maintainColumnRatios){s.configureColumnWidths();}});};p.assignGridEventHandlers();p.assignEvents();};ng.Column=function(r,w,p,t){var x=this,u=r.colDef,s=500,v=0,q=null;x.width=u.width;x.groupIndex=0;x.isGroupedBy=false;x.minWidth=!u.minWidth?50:u.minWidth;x.maxWidth=!u.maxWidth?9000:u.maxWidth;x.headerRowHeight=r.headerRowHeight;x.displayName=u.displayName||u.field;x.index=r.index;x.isAggCol=r.isAggCol;x.cellClass=u.cellClass;x.cellFilter=u.cellFilter?u.cellFilter:"";x.field=u.field;x.aggLabelFilter=u.cellFilter||u.aggLabelFilter;x.visible=ng.utils.isNullOrUndefined(u.visible)||u.visible;x.sortable=false;x.resizable=false;x.groupable=ng.utils.isNullOrUndefined(u.groupable)||u.sortable;if(r.enableSort){x.sortable=ng.utils.isNullOrUndefined(u.sortable)||u.sortable;}if(r.enableResize){x.resizable=ng.utils.isNullOrUndefined(u.resizable)||u.resizable;}x.sortDirection=undefined;x.sortingAlgorithm=u.sortFn;x.headerClass=u.headerClass;x.headerCellTemplate=u.headerCellTemplate||ng.defaultHeaderCellTemplate();x.cursor=x.sortable?"pointer":"default";x.cellTemplate=u.cellTemplate||ng.defaultCellTemplate().replace(k,x.cellFilter?"|"+x.cellFilter:"");if(u.cellTemplate&&!f.test(u.cellTemplate)){x.cellTemplate=$.ajax({type:"GET",url:u.cellTemplate,async:false}).responseText;}if(u.headerCellTemplate&&!f.test(u.headerCellTemplate)){x.headerCellTemplate=$.ajax({type:"GET",url:u.headerCellTemplate,async:false}).responseText;}x.groupedByClass=function(){return x.isGroupedBy?"ngGroupedByIcon":"ngGroupIcon";};x.toggleVisible=function(){x.visible=!x.visible;};x.showSortButtonUp=function(){return x.sortable?x.sortDirection===e:x.sortable;};x.showSortButtonDown=function(){return x.sortable?x.sortDirection===c:x.sortable;};x.noSortVisible=function(){return !x.sortDirection;};x.sort=function(){if(!x.sortable){return true;}var y=x.sortDirection===c?e:c;x.sortDirection=y;r.sortCallback(x);return false;};x.gripClick=function(){v++;if(v===1){q=setTimeout(function(){v=0;},s);}else{clearTimeout(q);r.resizeOnDataCallback(x);v=0;}};x.gripOnMouseDown=function(y){if(y.ctrlKey){x.toggleVisible();t.BuildStyles(w,p);return true;}y.target.parentElement.style.cursor="col-resize";x.startMousePosition=y.clientX;x.origWidth=x.width;$(document).mousemove(x.onMouseMove);$(document).mouseup(x.gripOnMouseUp);return false;};x.onMouseMove=function(z){var A=z.clientX-x.startMousePosition;var y=A+x.origWidth;x.width=(y<x.minWidth?x.minWidth:(y>x.maxWidth?x.maxWidth:y));t.BuildStyles(w,p);return false;};x.gripOnMouseUp=function(){$(document).off("mousemove");$(document).off("mouseup");event.target.parentElement.style.cursor="default";t.digest(w);return false;};};ng.Dimension=function(p){this.outerHeight=null;this.outerWidth=null;$.extend(this,p);};ng.Footer=function(p,q){p.maxRows=function(){var r=Math.max(p.pagingOptions.totalServerItems,q.sortedData.length);return r;};p.multiSelect=(q.config.canSelectRows&&q.config.multiSelect);p.selectedItemCount=q.selectedItemCount;p.maxPages=function(){return Math.ceil(p.maxRows()/p.pagingOptions.pageSize);};p.pageForward=function(){var r=p.pagingOptions.currentPage;if(p.pagingOptions.totalServerItems>0){p.pagingOptions.currentPage=Math.min(r+1,p.maxPages());}else{p.pagingOptions.currentPage++;}};p.pageBackward=function(){var r=p.pagingOptions.currentPage;p.pagingOptions.currentPage=Math.max(r-1,1);};p.pageToFirst=function(){p.pagingOptions.currentPage=1;};p.pageToLast=function(){var r=p.maxPages();p.pagingOptions.currentPage=r;};p.cantPageForward=function(){var s=p.pagingOptions.currentPage;var r=p.maxPages();if(p.pagingOptions.totalServerItems>0){return !(s<r);}else{return q.sortedData.length<1;}};p.cantPageToLast=function(){if(p.pagingOptions.totalServerItems>0){return p.cantPageForward();}else{return true;}};p.cantPageBackward=function(){var r=p.pagingOptions.currentPage;return !(r>1);};};ng.RowFactory=function(r,q){var p=this;p.rowCache=[];p.aggCache={};p.parentCache=[];p.dataChanged=true;p.parsedData=[];p.rowConfig={};p.selectionService=r.selectionService;p.rowHeight=30;p.numberOfAggregates=0;p.groupedData=undefined;p.rowHeight=r.config.rowHeight;p.rowConfig={canSelectRows:r.config.canSelectRows,rowClasses:r.config.rowClasses,selectedItems:r.config.selectedItems,selectWithCheckboxOnly:r.config.selectWithCheckboxOnly,beforeSelectionChangeCallback:r.config.beforeSelectionChange,afterSelectionChangeCallback:r.config.afterSelectionChange,jqueryUITheme:r.config.jqueryUITheme};p.renderedRange=new ng.Range(0,r.minRowsToRender()+l);p.buildEntityRow=function(s,u){var t=p.rowCache[u];if(!t){t=new ng.Row(s,p.rowConfig,p.selectionService);t.rowIndex=u+1;t.offsetTop=p.rowHeight*u;t.selected=s[b];p.rowCache[u]=t;}return t;};p.buildAggregateRow=function(u,t){var s=p.aggCache[u.aggIndex];if(!s){s=new ng.Aggregate(u,p);p.aggCache[u.aggIndex]=s;}s.index=t+1;s.offsetTop=p.rowHeight*t;return s;};p.UpdateViewableRange=function(s){p.renderedRange=s;p.renderedChange();};p.filteredDataChanged=function(){if(r.lateBoundColumns&&r.filteredData.length>0){r.config.columnDefs=undefined;r.buildColumns();r.lateBoundColumns=false;}p.dataChanged=true;p.rowCache=[];if(r.config.groups.length>0){p.getGrouping(r.config.groups);}p.UpdateViewableRange(p.renderedRange);};p.renderedChange=function(){if(!p.groupedData||r.config.groups.length<1){p.renderedChangeNoGroups();r.refreshDomSizes();return;}p.parentCache=[];var t=[];var s=p.parsedData.filter(function(u){return u[n]===false;}).slice(p.renderedRange.topRow,p.renderedRange.bottomRow);angular.forEach(s,function(v,u){var w;if(v.isAggRow){w=p.buildAggregateRow(v,p.renderedRange.topRow+u);}else{w=p.buildEntityRow(v,p.renderedRange.topRow+u);}t.push(w);});r.setRenderedRows(t);};p.renderedChangeNoGroups=function(){var t=[];var s=r.filteredData.slice(p.renderedRange.topRow,p.renderedRange.bottomRow);angular.forEach(s,function(v,u){var w=p.buildEntityRow(v,p.renderedRange.topRow+u);t.push(w);});r.setRenderedRows(t);};p.parseGroupData=function(t){if(t.values){angular.forEach(t.values,function(v){p.parentCache[p.parentCache.length-1].children.push(v);p.parsedData.push(v);});}else{for(var u in t){if(u==o||u==h||u==i){continue;}else{if(t.hasOwnProperty(u)){var s=p.buildAggregateRow({gField:t[o],gLabel:u,gDepth:t[h],isAggRow:true,_ng_hidden_:false,children:[],aggChildren:[],aggIndex:p.numberOfAggregates,aggLabelFilter:t[i].aggLabelFilter},0);p.numberOfAggregates++;s.parent=p.parentCache[s.depth-1];if(s.parent){s.parent.collapsed=false;s.parent.aggChildren.push(s);}p.parsedData.push(s.entity);p.parentCache[s.depth]=s;p.parseGroupData(t[u]);}}}}};p.getGrouping=function(s){p.aggCache=[];p.rowCache=[];p.numberOfAggregates=0;p.groupedData={};var t=r.filteredData;var v=s.length;var u=q.columns;angular.forEach(t,function(w){w[n]=true;var x=p.groupedData;angular.forEach(s,function(z,B){if(!u[B].isAggCol&&B<=v){u.splice(w.gDepth,0,new ng.Column({colDef:{field:"",width:25,sortable:false,resizable:false,headerCellTemplate:'<div class="ngAggHeader"></div>'},isAggCol:true,index:w.gDepth,headerRowHeight:r.config.headerRowHeight}));}var y=u.filter(function(C){return C.field==z;})[0];var A=ng.utils.evalProperty(w,z);A=A?A.toString():"null";if(!x[A]){x[A]={};}if(!x[o]){x[o]=z;}if(!x[h]){x[h]=B;}if(!x[i]){x[i]=y;}x=x[A];});if(!x.values){x.values=[];}x.values.push(w);});r.fixColumnIndexes();p.parsedData.length=0;p.parseGroupData(p.groupedData);};if(r.config.groups.length>0&&r.filteredData.length>0){p.getGrouping(r.config.groups);}};ng.Grid=function(r,s,v,q,u){var t={afterSelectionChange:function(){},beforeSelectionChange:function(){return true;},canSelectRows:true,columnDefs:undefined,data:[],displaySelectionCheckbox:true,enableColumnResize:true,enableColumnReordering:true,enablePaging:false,enableRowReordering:true,enableSorting:true,filterOptions:{filterText:"",useExternalFilter:false},footerRowHeight:55,displayFooter:undefined,footerVisible:true,groups:[],headerRowHeight:30,headerRowTemplate:undefined,jqueryUIDraggable:false,jqueryUITheme:false,keepLastSelected:true,maintainColumnRatios:undefined,multiSelect:true,pagingOptions:{pageSizes:[250,500,1000],pageSize:250,totalServerItems:0,currentPage:1},plugins:[],rowHeight:30,rowTemplate:undefined,selectedItems:[],selectWithCheckboxOnly:false,showColumnMenu:true,showFilter:true,showGroupPanel:false,sortInfo:undefined,tabIndex:-1,useExternalSorting:false,i18n:"en"},p=this;p.maxCanvasHt=0;p.config=$.extend(t,s);if(typeof s.columnDefs=="string"){p.config.columnDefs=r.$eval(s.columnDefs);}p.gridId="ng"+ng.utils.newId();p.$root=null;p.$groupPanel=null;p.$topPanel=null;p.$headerContainer=null;p.$headerScroller=null;p.$headers=null;p.$viewport=null;p.$canvas=null;p.rootDim=p.config.gridDim;p.sortInfo=p.config.sortInfo;p.sortedData=[];p.lateBindColumns=false;p.filteredData=[];if(typeof p.config.data=="object"){p.sortedData=p.config.data;}p.lastSortedColumn=undefined;p.calcMaxCanvasHeight=function(){return(p.config.groups.length>0)?(p.rowFactory.parsedData.filter(function(w){return w[n]===false;}).length*p.config.rowHeight):(p.filteredData.length*p.config.rowHeight);};p.elementDims={scrollW:0,scrollH:0,rowIndexCellW:25,rowSelectedCellW:25,rootMaxW:0,rootMaxH:0};p.setRenderedRows=function(w){r.renderedRows=w;if(!r.$$phase){r.$digest();}p.refreshDomSizes();r.$emit("ngGridEventRows",w);};p.minRowsToRender=function(){var w=r.viewportDimHeight()||1;return Math.floor(w/p.config.rowHeight);};p.refreshDomSizes=function(){var w=new ng.Dimension();w.outerWidth=p.elementDims.rootMaxW;w.outerHeight=p.elementDims.rootMaxH;p.rootDim=w;p.maxCanvasHt=p.calcMaxCanvasHeight();};p.buildColumnDefsFromData=function(){if(!p.config.columnDefs){p.config.columnDefs=[];}if(!p.sortedData||!p.sortedData[0]){p.lateBoundColumns=true;return;}var w;w=p.sortedData[0];ng.utils.forIn(w,function(y,x){if(x!=b){p.config.columnDefs.push({field:x});}});};p.buildColumns=function(){var y=p.config.columnDefs,x=[],w=0;if(!y){p.buildColumnDefsFromData();y=p.config.columnDefs;}if(p.config.displaySelectionCheckbox){w=1;x.push(new ng.Column({colDef:{field:"\u2714",width:p.elementDims.rowSelectedCellW,sortable:false,resizable:false,groupable:false,headerCellTemplate:'<input class="ngSelectionHeader" type="checkbox" ng-show="multiSelect" ng-model="allSelected" ng-change="toggleSelectAll(allSelected)"/>',cellTemplate:'<div class="ngSelectionCell"><input class="ngSelectionCheckbox" type="checkbox" ng-checked="row.selected" /></div>'},index:0,headerRowHeight:p.config.headerRowHeight,sortCallback:p.sortData,resizeOnDataCallback:p.resizeOnData,enableResize:p.config.enableColumnResize,enableSort:p.config.enableSorting},r,p,q,u));}if(y.length>0){angular.forEach(y,function(C,z){z+=w;var A=new ng.Column({colDef:C,index:z,headerRowHeight:p.config.headerRowHeight,sortCallback:p.sortData,resizeOnDataCallback:p.resizeOnData,enableResize:p.config.enableColumnResize,enableSort:p.config.enableSorting},r,p,q);x.push(A);var B=p.config.groups.indexOf(C.field);if(B!=-1){r.configGroups.splice(B,0,A);}});r.columns=x;}};p.configureColumnWidths=function(){var D=p.config.columnDefs;var z=p.config.displaySelectionCheckbox?r.configGroups.length+1:r.configGroups.length;var w=D.length+z,B=[],E=[],C=0,A=0;A+=p.config.displaySelectionCheckbox?25:0;angular.forEach(D,function(G,I){I+=z;var J=false,H=undefined;if(ng.utils.isNullOrUndefined(G.width)){G.width="*";}else{J=isNaN(G.width)?ng.utils.endsWith(G.width,"%"):false;H=J?G.width:parseInt(G.width,10);}if(isNaN(H)){H=G.width;if(H=="auto"){r.columns[I].width=G.minWidth;A+=r.columns[I].width;var F=r.columns[I];r.$evalAsync(function(){p.resizeOnData(F,true);});return;}else{if(H.indexOf("*")!=-1){C+=H.length;G.index=I;B.push(G);return;}else{if(J){G.index=I;E.push(G);return;}else{throw'unable to parse column width, use percentage ("10%","20%", etc...) or "*" to use remaining width of grid';}}}}else{A+=r.columns[I].width=parseInt(G.width,10);}});if(B.length>0){p.config.maintainColumnRatios===false?angular.noop():p.config.maintainColumnRatios=true;var y=p.rootDim.outerWidth-A;var x=Math.floor(y/C);angular.forEach(B,function(F){var G=F.width.length;r.columns[F.index].width=x*G;if(F.index+1==w){var H=2;if(p.maxCanvasHt>r.viewportDimHeight()){H+=q.ScrollW;}r.columns[F.index].width-=H;}A+=r.columns[F.index].width;});}if(E.length>0){angular.forEach(E,function(F){var G=F.width;r.columns[F.index].width=Math.floor(p.rootDim.outerWidth*(parseInt(G.slice(0,-1),10)/100));});}};p.init=function(){p.selectionService=new ng.SelectionService(p);p.rowFactory=new ng.RowFactory(p,r);p.selectionService.Initialize(p.rowFactory);p.searchProvider=new ng.SearchProvider(r,p,u);p.styleProvider=new ng.StyleProvider(r,p,q);p.buildColumns();r.$watch("configGroups",function(w){var x=[];angular.forEach(w,function(y){x.push(y.field||y);});p.config.groups=x;p.rowFactory.filteredDataChanged();r.$emit("ngGridEventGroups",w);},true);r.$watch("columns",function(w){q.BuildStyles(r,p,true);r.$emit("ngGridEventColumns",w);},true);r.$watch(function(){return s.i18n;},function(w){ng.utils.seti18n(r,w);});p.maxCanvasHt=p.calcMaxCanvasHeight();if(p.config.sortInfo){p.config.sortInfo.column=r.columns.filter(function(w){return w.field==p.config.sortInfo.field;})[0];p.config.sortInfo.column.sortDirection=p.config.sortInfo.direction.toUpperCase();p.sortData(p.config.sortInfo.column);}};p.prevScrollTop=0;p.prevScrollIndex=0;p.adjustScrollTop=function(x,w){if(p.prevScrollTop===x&&!w){return;}var y=Math.floor(x/p.config.rowHeight);if(p.prevScrollTop<x&&y<p.prevScrollIndex+a){return;}if(p.prevScrollTop>x&&y>p.prevScrollIndex-a){return;}p.prevScrollTop=x;p.rowFactory.UpdateViewableRange(new ng.Range(Math.max(0,y-l),y+p.minRowsToRender()+l));p.prevScrollIndex=y;};p.adjustScrollLeft=function(w){if(p.$headerContainer){p.$headerContainer.scrollLeft(w);}};p.resizeOnData=function(x){var y=x.minWidth;var w=ng.utils.getElementsByClassName("col"+x.index);angular.forEach(w,function(D,A){var B;if(A===0){var C=$(D).find(".ngHeaderText");B=ng.utils.visualLength(C)+10;}else{var z=$(D).find(".ngCellText");B=ng.utils.visualLength(z)+10;}if(B>y){y=B;}});x.width=x.longest=Math.min(x.maxWidth,y+7);q.BuildStyles(r,p,true);};p.sortData=function(w){p.config.sortInfo={column:w,field:w.field,direction:w.sortDirection};p.clearSortingData(w);if(!p.config.useExternalSorting){v.Sort(p.config.sortInfo,p.sortedData);}p.lastSortedColumn=w;p.searchProvider.evalFilter();r.$emit("ngGridEventSorted",w);};p.clearSortingData=function(w){if(!w){angular.forEach(r.columns,function(x){x.sortDirection="";});}else{if(p.lastSortedColumn&&w!=p.lastSortedColumn){p.lastSortedColumn.sortDirection="";}}};p.fixColumnIndexes=function(){angular.forEach(r.columns,function(w,x){w.index=x;});};p.fixGroupIndexes=function(){angular.forEach(r.configGroups,function(x,w){x.groupIndex=w+1;});};r.elementsNeedMeasuring=true;r.columns=[];r.renderedRows=[];r.headerRow=null;r.rowHeight=p.config.rowHeight;r.jqueryUITheme=p.config.jqueryUITheme;r.footer=null;r.selectedItems=p.config.selectedItems;r.multiSelect=p.config.multiSelect;r.footerVisible=ng.utils.isNullOrUndefined(p.config.displayFooter)?p.config.footerVisible:p.config.displayFooter;r.footerRowHeight=r.footerVisible?p.config.footerRowHeight:0;r.showColumnMenu=p.config.showColumnMenu;r.showMenu=false;r.configGroups=[];r.enablePaging=p.config.enablePaging;r.pagingOptions=p.config.pagingOptions;r.rowTemplate=p.config.rowTemplate||ng.defaultRowTemplate();r.headerRowTemplate=p.config.headerRowTemplate||ng.defaultHeaderRowTemplate();r.i18n={};ng.utils.seti18n(r,p.config.i18n);if(p.config.rowTemplate&&!f.test(p.config.rowTemplate)){r.rowTemplate=$.ajax({type:"GET",url:p.config.rowTemplate,async:false}).responseText;}if(p.config.headerRowTemplate&&!f.test(p.config.headerRowTemplate)){r.headerRowTemplate=$.ajax({type:"GET",url:p.config.headerRowTemplate,async:false}).responseText;}r.visibleColumns=function(){return r.columns.filter(function(w){return w.visible;});};r.toggleShowMenu=function(){r.showMenu=!r.showMenu;};r.toggleSelectAll=function(w){p.selectionService.toggleSelectAll(w);};r.totalFilteredItemsLength=function(){return p.filteredData.length;};r.showGroupPanel=function(){return p.config.showGroupPanel;};r.topPanelHeight=function(){return p.config.showGroupPanel===true?p.config.headerRowHeight*2:p.config.headerRowHeight;};r.viewportDimHeight=function(){return Math.max(0,p.rootDim.outerHeight-r.topPanelHeight()-r.footerRowHeight-2);};r.groupBy=function(w){if(p.sortedData.length<1||!w.groupable){return;}var x=r.configGroups.indexOf(w);if(x==-1){w.isGroupedBy=true;r.configGroups.push(w);w.groupIndex=r.configGroups.length;}else{r.removeGroup(x);}};r.removeGroup=function(x){var w=r.columns.filter(function(y){return y.groupIndex==(x+1);})[0];w.isGroupedBy=false;w.groupIndex=0;if(r.columns[x].isAggCol){r.columns.splice(x,1);r.configGroups.splice(x,1);p.fixGroupIndexes();}if(r.configGroups.length===0){p.fixColumnIndexes();q.digest(r);}};r.totalRowWidth=function(){var w=0,x=r.visibleColumns();angular.forEach(x,function(y){w+=y.width;});return w;};r.headerScrollerDim=function(){var x=r.viewportDimHeight(),y=p.maxCanvasHt,z=(y>x),w=new ng.Dimension();w.autoFitHeight=true;w.outerWidth=r.totalRowWidth();if(z){w.outerWidth+=p.elementDims.scrollW;}else{if((y-x)<=p.elementDims.scrollH){w.outerWidth+=p.elementDims.scrollW;}}return w;};p.init();};ng.Range=function(q,p){this.topRow=q;this.bottomRow=p;};ng.Row=function(r,s,t){var q=this,p=s.canSelectRows;q.jqueryUITheme=s.jqueryUITheme;q.rowClasses=s.rowClasses;q.entity=r;q.selectionService=t;q.selected=false;q.cursor=p?"pointer":"default";q.continueSelection=function(u){q.selectionService.ChangeSelection(q,u);};q.toggleSelected=function(v){if(!p){return true;}var u=v.target||v;if(u.type=="checkbox"&&u.parentElement.className!="ngSelectionCell ng-scope"){return true;}if(s.selectWithCheckboxOnly&&u.type!="checkbox"){return true;}else{if(q.beforeSelectionChange(q)){q.continueSelection(v);return q.afterSelectionChange();}}return false;};q.rowIndex=0;q.offsetTop=0;q.rowDisplayIndex=0;q.alternatingRowClass=function(){var v=(q.rowIndex%2)===0;var u={selected:q.selected,"ui-state-default":q.jqueryUITheme&&v,"ui-state-active":q.jqueryUITheme&&!v,even:v,odd:!v};return u;};q.beforeSelectionChange=s.beforeSelectionChangeCallback;q.afterSelectionChange=s.afterSelectionChangeCallback;q.propertyCache={};q.getProperty=function(u){return q.propertyCache[u]||ng.utils.evalProperty(q.entity,u);};if(q.entity[b]===undefined){q.entity[b]=false;}else{if(q.entity[b]){q.selectionService.setSelection(q,q.entity[b]);}}};ng.SearchProvider=function(s,t,w){var r=this,p=[];r.extFilter=t.config.filterOptions.useExternalFilter;s.showFilter=t.config.showFilter;s.filterText="";r.fieldMap={};r.evalFilter=function(){if(p.length===0){t.filteredData=t.sortedData;}else{t.filteredData=t.sortedData.filter(function(J){for(var C=0,E=p.length;C<E;C++){var B=p[C];if(!B.column){for(var y in J){if(J.hasOwnProperty(y)){var G=r.fieldMap[y];if(!G){continue;}var D=(G&&G.cellFilter)?w(G.cellFilter):null;var x=J[y];if(x!=null){var K;if(typeof D=="function"){var F=D(typeof x==="object"?v(x,G.field):x).toString();K=B.regex.test(F);}else{K=B.regex.test(typeof x==="object"?v(x,G.field).toString():x.toString());}if(x&&K){return true;}}}}return false;}var A=r.fieldMap[B.columnDisplay];if(!A){return false;}var z=A.cellFilter?w(A.cellFilter):null;var H=J[B.column]||J[A.field.split(".")[0]];if(H==null){return false;}var K;if(typeof z=="function"){var I=z(typeof H==="object"?v(H,A.field):H).toString();K=B.regex.test(I);}else{K=B.regex.test(typeof H==="object"?v(H,A.field).toString():H.toString());}if(!H||!K){return false;}}return true;});}t.rowFactory.filteredDataChanged();};var v=function(C,y){if(typeof C!="object"||typeof y!="string"){return C;}var z=y.split(".");var B=C;if(z.length>1){for(var A=1,x=z.length;A<x;A++){B=B[z[A]];if(!B){return C;}}return B;}return C;};var q=function(z,x){try{return new RegExp(z,x);}catch(y){return new RegExp(z.replace(/(\^|\$|\(|\)|\<|\>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"));}};var u=function(x){p=[];var z="";if(!(z=$.trim(x))){return;}var y=z.split(";");$.each(y,function(C,D){var B=D.split(":");if(B.length>1){var A=$.trim(B[0]);var F=$.trim(B[1]);if(A&&F){p.push({column:A,columnDisplay:A.replace(/\s+/g,"").toLowerCase(),regex:q(F,"i")});}}else{var E=$.trim(B[0]);if(E){p.push({column:"",regex:q(E,"i")});}}});};s.$watch(t.config.filterOptions.filterText,function(x){s.filterText=x;});s.$watch("filterText",function(x){if(!r.extFilter){s.$emit("filterChanged",x);u(x);r.evalFilter();}});if(!r.extFilter){s.$watch("columns",function(x){angular.forEach(x,function(y){r.fieldMap[y.field.split(".")[0]]=y;r.fieldMap[y.displayName.toLowerCase().replace(/\s+/g,"")]=y;});});}};ng.SelectionService=function(q){var p=this;p.multi=q.config.multiSelect;p.selectedItems=q.config.selectedItems;p.selectedIndex=q.config.selectedIndex;p.lastClickedRow=undefined;p.ignoreSelectedItemChanges=false;p.rowFactory={};p.Initialize=function(r){p.rowFactory=r;};p.ChangeSelection=function(u,s){if(s&&s.shiftKey&&p.multi){if(p.lastClickedRow){var t=q.filteredData.indexOf(u.entity);var r=q.filteredData.indexOf(p.lastClickedRow.entity);if(t==r){return false;}r++;if(t<r){t=t^r;r=t^r;t=t^r;}var v=[];for(;r<=t;r++){v.push(p.rowFactory.rowCache[r]);}if(v[v.length-1].beforeSelectionChange(v,s)){$.each(v,function(x,w){w.selected=true;w.entity[b]=true;if(p.selectedItems.indexOf(w.entity)===-1){p.selectedItems.push(w.entity);}});v[v.length-1].afterSelectionChange(v,s);}p.lastClickedRow=v[v.length-1];return true;}}else{if(!p.multi){if(p.lastClickedRow&&p.lastClickedRow!=u){p.setSelection(p.lastClickedRow,false);}p.setSelection(u,q.config.keepLastSelected?true:!u.selected);}else{p.setSelection(u,!u.selected);}}p.lastClickedRow=u;return true;};p.setSelection=function(t,r){t.selected=r;t.entity[b]=r;if(!r){var s=p.selectedItems.indexOf(t.entity);p.selectedItems.splice(s,1);}else{if(p.selectedItems.indexOf(t.entity)===-1){p.selectedItems.push(t.entity);}}};p.toggleSelectAll=function(r){angular.forEach(q.filteredData,function(u,t){q.rowFactory.buildEntityRow(u,t);});if(q.config.beforeSelectionChange(q.rowFactory.rowCache)){var s=p.selectedItems.length;if(s>0){p.selectedItems.splice(0,s);}angular.forEach(q.filteredData,function(t){t[b]=r;if(r){p.selectedItems.push(t);}});angular.forEach(p.rowFactory.rowCache,function(t){t.selected=r;});q.config.afterSelectionChange(q.rowFactory.rowCache);}};};ng.StyleProvider=function(q,r,p){q.headerCellStyle=function(s){return{height:s.headerRowHeight+"px"};};q.rowStyle=function(s){return{top:s.offsetTop+"px",height:q.rowHeight+"px"};};q.canvasStyle=function(){return{height:r.maxCanvasHt.toString()+"px"};};q.headerScrollerStyle=function(){return{height:r.config.headerRowHeight+"px"};};q.topPanelStyle=function(){return{width:r.rootDim.outerWidth+"px",height:q.topPanelHeight()+"px"};};q.headerStyle=function(){return{width:(r.rootDim.outerWidth-p.ScrollW)+"px",height:r.config.headerRowHeight+"px"};};q.viewportStyle=function(){return{width:r.rootDim.outerWidth+"px",height:q.viewportDimHeight()+"px"};};q.footerStyle=function(){return{width:r.rootDim.outerWidth+"px",height:q.footerRowHeight+"px"};};};j.directive("ngGrid",["$compile","$filter","SortService","DomUtilityService",function(q,s,t,p){var r={scope:true,compile:function(){return{pre:function(A,v,y){var B=$(v);var C=A.$eval(y.ngGrid);C.gridDim=new ng.Dimension({outerHeight:$(B).height(),outerWidth:$(B).width()});var u=new ng.Grid(A,C,t,p,s);if(typeof C.columnDefs=="string"){A.$parent.$watch(C.columnDefs,function(D){A.columns=[];u.config.columnDefs=D;u.buildColumns();u.configureColumnWidths();p.BuildStyles(A,u);u.eventProvider.assignEvents();});}if(typeof C.data=="string"){var x=0;var z=function(D){x=D?D.length:0;u.sortedData=A.$eval(C.data)||[];u.searchProvider.evalFilter();u.configureColumnWidths();u.refreshDomSizes();if(u.config.sortInfo){if(!u.config.sortInfo.column){u.config.sortInfo.column=A.columns.filter(function(E){return E.field==u.config.sortInfo.field;})[0];if(!u.config.sortInfo.column){return;}}u.config.sortInfo.column.sortDirection=u.config.sortInfo.direction.toLowerCase();u.sortData(u.config.sortInfo.column);}};A.$parent.$watch(C.data,z);A.$parent.$watch(C.data+".length",function(D){if(D!=x){z(A.$eval(C.data));}});}var w=ng.defaultGridTemplate(u.config);u.footerController=new ng.Footer(A,u);v.addClass("ngGrid").addClass(u.gridId.toString());if(C.jqueryUITheme){v.addClass("ui-widget");}v.append(q(w)(A));p.AssignGridContainers(v,u);u.configureColumnWidths();u.eventProvider=new ng.EventProvider(u,A,p);angular.forEach(C.plugins,function(D){D.init(A.$new(),u,{SortService:t,DomUtilityService:p});});return null;}};}};return r;}]);j.directive("ngRow",["$compile",function(q){var p={scope:false,compile:function(){return{pre:function(r,t){if(r.row.isAggRow){var s=ng.aggregateTemplate();if(r.row.aggLabelFilter){s=s.replace(k,"| "+r.row.aggLabelFilter);}else{s=s.replace(k,"");}t.append(q(s)(r));}else{t.append(q(r.rowTemplate)(r));}}};}};return p;}]);j.directive("ngCell",["$compile",function(q){var p={scope:false,compile:function(){return{pre:function(r,s){s.append(q(r.col.cellTemplate)(r));}};}};return p;}]);j.directive("ngHeaderRow",["$compile",function(p){var q={scope:false,compile:function(){return{pre:function(r,s){if(s.children().length===0){s.append(p(r.headerRowTemplate)(r));}}};}};return q;}]);j.directive("ngHeaderCell",["$compile",function(p){var q={scope:false,compile:function(){return{pre:function(r,s){s.append(p(r.col.headerCellTemplate)(r));}};}};return q;}]);angular.module("ngGrid",["ngGrid.services","ngGrid.directives","ngGrid.filters"]);g.ngGrid.i18n.en={ngAggregateLabel:"items",ngGroupPanelDescription:"Drag a column header here and drop it to group by that column.",ngSearchPlaceHolder:"Search...",ngMenuText:"Choose Columns:",ngShowingItemsLabel:"Showing Items:",ngTotalItemsLabel:"Total Items:",ngSelectedItemsLabel:"Selected Items:",ngPageSizeLabel:"Page Size:",ngPagerFirstTitle:"First Page",ngPagerNextTitle:"Next Page",ngPagerPrevTitle:"Previous Page",ngPagerLastTitle:"Last Page"};}(window));